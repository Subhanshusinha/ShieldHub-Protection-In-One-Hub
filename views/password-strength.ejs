<%- include('partials/header') %>

    <section class="password-hero">
        <div class="hero-background">
            <div class="lock-animation">
                <i class="fas fa-lock"></i>
            </div>
            <div class="floating-keys">
                <i class="fas fa-key key-1"></i>
                <i class="fas fa-key key-2"></i>
                <i class="fas fa-key key-3"></i>
                <i class="fas fa-asterisk key-4"></i>
                <i class="fas fa-asterisk key-5"></i>
            </div>
        </div>
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Advanced Password Analysis</span>
                </div>
                <h1>Password <span class="gradient-text">Security</span></h1>
                <p>Check your password strength and generate unbreakable passwords</p>
            </div>
        </div>
    </section>

    <section class="password-section">
        <div class="container">
            <div class="password-grid">
                <!-- Password Checker Card -->
                <div class="password-card checker-card">
                    <div class="card-header">
                        <div class="card-icon purple-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div>
                            <h2>Check Password Strength</h2>
                            <p>Analyze your password security level</p>
                        </div>
                    </div>

                    <form id="passwordForm" class="password-form">
                        <div class="password-input-wrapper">
                            <div class="input-icon">
                                <i class="fas fa-lock"></i>
                            </div>
                            <input type="password" id="passwordInput" placeholder="Enter your password to check..."
                                required />
                            <button type="button" class="toggle-btn"
                                onclick="togglePassword('passwordInput', 'eyeIcon1')">
                                <i class="fas fa-eye" id="eyeIcon1"></i>
                            </button>
                        </div>

                        <button type="submit" class="btn-check" id="checkBtn">
                            <i class="fas fa-search"></i>
                            <span>Check Strength</span>
                        </button>
                    </form>

                    <!-- Result Section -->
                    <div id="passwordResult" class="result-section" style="display: none;">
                        <div id="resultContent"></div>
                    </div>
                </div>

                <!-- Password Generator Card -->
                <div class="password-card generator-card">
                    <div class="card-header">
                        <div class="card-icon green-icon">
                            <i class="fas fa-magic"></i>
                        </div>
                        <div>
                            <h2>Generate Strong Password</h2>
                            <p>Create unbreakable passwords instantly</p>
                        </div>
                    </div>

                    <div class="generated-display">
                        <div class="password-output">
                            <input type="text" id="generatedPassword" readonly
                                placeholder="Click Generate to create password" />
                            <div class="output-actions">
                                <button type="button" class="action-btn copy-btn" onclick="copyPassword()" title="Copy">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button type="button" class="action-btn refresh-btn" onclick="generatePassword()"
                                    title="Regenerate">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="strength-preview" id="strengthPreview">
                            <div class="mini-bar">
                                <div class="mini-fill" id="miniFill"></div>
                            </div>
                            <span id="strengthText">--</span>
                        </div>
                    </div>

                    <div class="generator-controls">
                        <div class="length-control">
                            <div class="length-header">
                                <label>Password Length</label>
                                <span class="length-value" id="lengthValue">16</span>
                            </div>
                            <input type="range" id="passwordLength" min="8" max="32" value="16"
                                oninput="updateLength()">
                            <div class="length-labels">
                                <span>8</span>
                                <span>16</span>
                                <span>24</span>
                                <span>32</span>
                            </div>
                        </div>

                        <div class="char-options">
                            <label class="char-option active">
                                <input type="checkbox" id="includeUppercase" checked onchange="toggleOption(this)">
                                <div class="option-content">
                                    <span class="option-letter">A</span>
                                    <span class="option-label">Uppercase</span>
                                </div>
                            </label>
                            <label class="char-option active">
                                <input type="checkbox" id="includeLowercase" checked onchange="toggleOption(this)">
                                <div class="option-content">
                                    <span class="option-letter">a</span>
                                    <span class="option-label">Lowercase</span>
                                </div>
                            </label>
                            <label class="char-option active">
                                <input type="checkbox" id="includeNumbers" checked onchange="toggleOption(this)">
                                <div class="option-content">
                                    <span class="option-letter">1</span>
                                    <span class="option-label">Numbers</span>
                                </div>
                            </label>
                            <label class="char-option active">
                                <input type="checkbox" id="includeSymbols" checked onchange="toggleOption(this)">
                                <div class="option-content">
                                    <span class="option-letter">@</span>
                                    <span class="option-label">Symbols</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <button type="button" class="btn-generate" onclick="generatePassword()">
                        <i class="fas fa-magic"></i>
                        Generate Secure Password
                    </button>
                </div>
            </div>

            <!-- Tips Section -->
            <div class="tips-section">
                <h3><i class="fas fa-lightbulb"></i> Password Security Tips</h3>
                <div class="tips-grid">
                    <div class="tip-card">
                        <div class="tip-icon"><i class="fas fa-ruler"></i></div>
                        <h4>Length Matters</h4>
                        <p>Use at least 12 characters. Longer passwords are exponentially harder to crack.</p>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon"><i class="fas fa-random"></i></div>
                        <h4>Mix It Up</h4>
                        <p>Combine uppercase, lowercase, numbers, and symbols for maximum security.</p>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon"><i class="fas fa-ban"></i></div>
                        <h4>Avoid Common Words</h4>
                        <p>Never use personal info, dictionary words, or common patterns like "123456".</p>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon"><i class="fas fa-fingerprint"></i></div>
                        <h4>Unique Passwords</h4>
                        <p>Use a different password for each account to prevent chain breaches.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Copy Notification -->
    <div id="copyNotification" class="copy-notification">
        <i class="fas fa-check-circle"></i>
        <span>Copied to clipboard!</span>
    </div>

    <style>
        /* Hero Section */
        .password-hero {
            position: relative;
            padding: 80px 0 60px;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
            overflow: hidden;
        }

        .hero-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .lock-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 200px;
            color: rgba(139, 92, 246, 0.05);
            animation: lockPulse 4s ease-in-out infinite;
        }

        @keyframes lockPulse {

            0%,
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.05;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 0.1;
            }
        }

        .floating-keys i {
            position: absolute;
            color: rgba(139, 92, 246, 0.15);
            animation: floatKey 6s ease-in-out infinite;
        }

        .key-1 {
            top: 20%;
            left: 10%;
            font-size: 30px;
            animation-delay: 0s;
        }

        .key-2 {
            top: 30%;
            right: 15%;
            font-size: 40px;
            animation-delay: 1s;
        }

        .key-3 {
            bottom: 25%;
            left: 15%;
            font-size: 35px;
            animation-delay: 2s;
        }

        .key-4 {
            top: 15%;
            right: 25%;
            font-size: 25px;
            animation-delay: 3s;
        }

        .key-5 {
            bottom: 30%;
            right: 20%;
            font-size: 28px;
            animation-delay: 4s;
        }

        @keyframes floatKey {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            50% {
                transform: translateY(-15px) rotate(15deg);
            }
        }

        .hero-content {
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            padding: 8px 18px;
            border-radius: 50px;
            color: #c4b5fd;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .password-hero h1 {
            font-size: 48px;
            color: #fff;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .gradient-text {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa, #c4b5fd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .password-hero p {
            color: #a5b4fc;
            font-size: 18px;
        }

        /* Password Section */
        .password-section {
            padding: 60px 0;
            background: #f8fafc;
        }

        .password-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        /* Password Cards */
        .password-card {
            background: #fff;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
        }

        .checker-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8b5cf6, #a78bfa);
        }

        .generator-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #34d399);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 25px;
        }

        .card-icon {
            width: 55px;
            height: 55px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .purple-icon {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }

        .green-icon {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }

        .card-icon i {
            font-size: 24px;
            color: #fff;
        }

        .card-header h2 {
            font-size: 20px;
            color: #1e293b;
            margin: 0 0 4px;
        }

        .card-header p {
            color: #64748b;
            font-size: 13px;
            margin: 0;
        }

        /* Password Input */
        .password-input-wrapper {
            display: flex;
            align-items: center;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .password-input-wrapper:focus-within {
            border-color: #8b5cf6;
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.1);
        }

        .input-icon {
            padding: 0 15px;
            color: #8b5cf6;
        }

        .password-input-wrapper input {
            flex: 1;
            padding: 16px 0;
            border: none;
            font-size: 15px;
            background: transparent;
        }

        .password-input-wrapper input:focus {
            outline: none;
        }

        .toggle-btn {
            padding: 0 15px;
            background: none;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            transition: color 0.3s;
        }

        .toggle-btn:hover {
            color: #8b5cf6;
        }

        /* Buttons */
        .btn-check {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }

        .btn-check:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(139, 92, 246, 0.4);
        }

        .btn-generate {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: #fff;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
            margin-top: 20px;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.4);
        }

        /* Generated Password Display */
        .generated-display {
            margin-bottom: 25px;
        }

        .password-output {
            display: flex;
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 14px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .password-output input {
            flex: 1;
            padding: 16px;
            border: none;
            font-size: 16px;
            font-family: 'Courier New', monospace;
            font-weight: 600;
            background: transparent;
            color: #1e293b;
        }

        .password-output input:focus {
            outline: none;
        }

        .output-actions {
            display: flex;
            gap: 5px;
            padding: 8px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            transition: all 0.3s ease;
        }

        .copy-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }

        .refresh-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .action-btn:hover {
            transform: scale(1.1);
        }

        .refresh-btn:hover {
            transform: scale(1.1) rotate(180deg);
        }

        /* Strength Preview */
        .strength-preview {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .mini-bar {
            flex: 1;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .mini-fill {
            height: 100%;
            width: 0%;
            background: #10b981;
            border-radius: 3px;
            transition: all 0.5s ease;
        }

        #strengthText {
            font-size: 12px;
            font-weight: 600;
            color: #64748b;
            min-width: 80px;
            text-align: right;
        }

        /* Generator Controls */
        .generator-controls {
            background: #f8fafc;
            border-radius: 16px;
            padding: 20px;
        }

        .length-control {
            margin-bottom: 20px;
        }

        .length-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .length-header label {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }

        .length-value {
            background: linear-gradient(135deg, #10b981, #059669);
            color: #fff;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
        }

        .length-control input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            appearance: none;
            background: #e2e8f0;
            cursor: pointer;
        }

        .length-control input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10b981, #059669);
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(16, 185, 129, 0.4);
        }

        .length-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 11px;
            color: #94a3b8;
        }

        /* Character Options */
        .char-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .char-option {
            position: relative;
            cursor: pointer;
        }

        .char-option input {
            display: none;
        }

        .option-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .char-option.active .option-content {
            border-color: #10b981;
            background: #f0fdf4;
        }

        .option-letter {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .char-option.active .option-letter {
            color: #10b981;
        }

        .option-label {
            font-size: 10px;
            color: #64748b;
            font-weight: 500;
        }

        /* Result Section */
        .result-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 2px solid #f1f5f9;
        }

        .strength-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            border-radius: 14px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .strength-weak {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            color: #991b1b;
        }

        .strength-fair {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
        }

        .strength-moderate {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
        }

        .strength-strong {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            color: #065f46;
        }

        .strength-meter {
            background: #f8fafc;
            padding: 18px;
            border-radius: 14px;
            margin-bottom: 20px;
        }

        .strength-label {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .strength-bar {
            height: 12px;
            background: #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .strength-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .strength-fill.strength-weak {
            background: #ef4444;
        }

        .strength-fill.strength-fair {
            background: #f59e0b;
        }

        .strength-fill.strength-moderate {
            background: #3b82f6;
        }

        .strength-fill.strength-strong {
            background: #10b981;
        }

        .feedback-list {
            background: #fef3c7;
            padding: 18px;
            border-radius: 14px;
            border-left: 4px solid #f59e0b;
        }

        .feedback-list h4 {
            color: #92400e;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .feedback-list ul {
            margin: 0;
            padding-left: 20px;
        }

        .feedback-list li {
            color: #78350f;
            margin-bottom: 6px;
            font-size: 13px;
        }

        .success-message {
            color: #059669;
            font-weight: 600;
            text-align: center;
            padding: 15px;
            background: #d1fae5;
            border-radius: 12px;
        }

        /* Tips Section */
        .tips-section {
            margin-top: 50px;
        }

        .tips-section>h3 {
            text-align: center;
            font-size: 24px;
            color: #1e293b;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .tips-section>h3 i {
            color: #f59e0b;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .tip-card {
            background: #fff;
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .tip-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .tip-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: #fff;
            font-size: 20px;
        }

        .tip-card:nth-child(2) .tip-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .tip-card:nth-child(3) .tip-icon {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .tip-card:nth-child(4) .tip-icon {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .tip-card h4 {
            color: #1e293b;
            font-size: 15px;
            margin-bottom: 8px;
        }

        .tip-card p {
            color: #64748b;
            font-size: 13px;
            line-height: 1.5;
        }

        /* Copy Notification */
        .copy-notification {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #10b981, #059669);
            color: #fff;
            padding: 14px 28px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .copy-notification.show {
            transform: translateX(-50%) translateY(0);
        }

        @media (max-width: 900px) {
            .password-grid {
                grid-template-columns: 1fr;
            }

            .tips-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .char-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .password-hero h1 {
                font-size: 36px;
            }
        }
    </style>

    <script>
        // Toggle Password Visibility
        function togglePassword(inputId, iconId) {
            const input = document.getElementById(inputId);
            const icon = document.getElementById(iconId);
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // Update Length Display
        function updateLength() {
            const length = document.getElementById('passwordLength').value;
            document.getElementById('lengthValue').textContent = length;
        }

        // Toggle Character Option
        function toggleOption(checkbox) {
            const label = checkbox.closest('.char-option');
            if (checkbox.checked) {
                label.classList.add('active');
            } else {
                label.classList.remove('active');
            }
        }

        // Generate Password
        function generatePassword() {
            const length = parseInt(document.getElementById('passwordLength').value);
            const includeUppercase = document.getElementById('includeUppercase').checked;
            const includeLowercase = document.getElementById('includeLowercase').checked;
            const includeNumbers = document.getElementById('includeNumbers').checked;
            const includeSymbols = document.getElementById('includeSymbols').checked;

            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';

            let chars = '';
            let password = '';

            if (includeUppercase) chars += uppercase;
            if (includeLowercase) chars += lowercase;
            if (includeNumbers) chars += numbers;
            if (includeSymbols) chars += symbols;

            if (chars === '') {
                alert('Please select at least one character type!');
                return;
            }

            // Ensure at least one of each selected type
            if (includeUppercase) password += uppercase[Math.floor(Math.random() * uppercase.length)];
            if (includeLowercase) password += lowercase[Math.floor(Math.random() * lowercase.length)];
            if (includeNumbers) password += numbers[Math.floor(Math.random() * numbers.length)];
            if (includeSymbols) password += symbols[Math.floor(Math.random() * symbols.length)];

            // Fill the rest
            for (let i = password.length; i < length; i++) {
                password += chars[Math.floor(Math.random() * chars.length)];
            }

            // Shuffle
            password = password.split('').sort(() => Math.random() - 0.5).join('');
            document.getElementById('generatedPassword').value = password;

            // Update strength preview
            updateStrengthPreview(password);
        }

        function updateStrengthPreview(password) {
            let strength = 0;
            if (password.length >= 8) strength += 20;
            if (password.length >= 12) strength += 20;
            if (/[A-Z]/.test(password)) strength += 15;
            if (/[a-z]/.test(password)) strength += 15;
            if (/[0-9]/.test(password)) strength += 15;
            if (/[^A-Za-z0-9]/.test(password)) strength += 15;

            const fill = document.getElementById('miniFill');
            const text = document.getElementById('strengthText');

            fill.style.width = strength + '%';

            if (strength >= 80) {
                fill.style.background = '#10b981';
                text.textContent = 'Very Strong';
                text.style.color = '#10b981';
            } else if (strength >= 60) {
                fill.style.background = '#3b82f6';
                text.textContent = 'Strong';
                text.style.color = '#3b82f6';
            } else if (strength >= 40) {
                fill.style.background = '#f59e0b';
                text.textContent = 'Fair';
                text.style.color = '#f59e0b';
            } else {
                fill.style.background = '#ef4444';
                text.textContent = 'Weak';
                text.style.color = '#ef4444';
            }
        }

        // Copy Password
        function copyPassword() {
            const password = document.getElementById('generatedPassword').value;
            if (!password) {
                alert('Generate a password first!');
                return;
            }

            navigator.clipboard.writeText(password).then(() => {
                const notification = document.getElementById('copyNotification');
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 2000);
            });
        }

        // Password Strength Checker
        document.getElementById('passwordForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const password = document.getElementById('passwordInput').value;
            const resultDiv = document.getElementById('passwordResult');
            const resultContent = document.getElementById('resultContent');

            resultDiv.style.display = 'none';

            try {
                const response = await fetch('/api/password/check', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: password })
                });

                const data = await response.json();

                if (data.success) {
                    let strengthClass = 'strength-weak';
                    if (data.strengthLevel === 'strong') strengthClass = 'strength-strong';
                    else if (data.strengthLevel === 'moderate') strengthClass = 'strength-moderate';
                    else if (data.strengthLevel === 'fair') strengthClass = 'strength-fair';

                    resultContent.innerHTML = `
                <div class="strength-badge ${strengthClass}">
                    <i class="fas fa-${data.strengthLevel === 'strong' ? 'check-circle' : 'exclamation-circle'}"></i>
                    <span>${data.message}</span>
                </div>
                <div class="strength-meter">
                    <div class="strength-label">Strength: ${data.strength}%</div>
                    <div class="strength-bar">
                        <div class="strength-fill ${strengthClass}" style="width: ${data.strength}%"></div>
                    </div>
                </div>
                ${data.feedback.length > 0 ? `
                    <div class="feedback-list">
                        <h4><i class="fas fa-lightbulb"></i> Recommendations:</h4>
                        <ul>
                            ${data.feedback.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                ` : '<p class="success-message"><i class="fas fa-check-circle"></i> Your password is strong!</p>'}
            `;
                    resultDiv.style.display = 'block';
                } else {
                    resultContent.innerHTML = `<div class="strength-badge strength-weak"><i class="fas fa-times-circle"></i>${data.message}</div>`;
                    resultDiv.style.display = 'block';
                }
            } catch (error) {
                resultContent.innerHTML = '<div class="strength-badge strength-weak"><i class="fas fa-times-circle"></i>Error checking password.</div>';
                resultDiv.style.display = 'block';
            }
        });
    </script>

    <%- include('partials/footer') %>